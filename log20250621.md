# 项目更新日志

## 0.3.2 - 2025-06-25
### 修复与优化
- 优化了任务详情页面的功能和显示
  - 在TaskDetail.vue中添加了TaskSalesInfoCard组件显示销售信息
  - 在TaskFlowController.vue中添加了"需要上门"选择功能
  - 为"需要上门"功能添加了直观的UI界面，包括选择按钮和提示信息
  - 为任务流程控制器添加了新的功能和响应式变量
  - 实现了任务转出功能，创建了TaskTransferDialog.vue组件
  - 完善了转出任务的工程师选择、说明输入和API调用过程
  - 优化了流程决策点的交互体验
  - 更新了任务详情组件间的事件处理和数据流转

## 0.3.1 - 2025-06-20
### 修复与优化
- 优化了入库和出库页面的UI交互体验
  - 将底部按钮位置从`bottom: 0`调整为`bottom: 60px`，解决被底部导航栏遮挡的问题
  - 在入库和出库页面顶部添加了"扫码入库"和"扫码出库"按钮
  - 增加了扫码功能的占位方法`openScanner`，为未来扫码功能实现做准备
  - 优化了扫码按钮的样式，提高了用户体验
  - 调整了页面整体布局，确保所有按钮可见且可点击

## 0.3.0 - 2025-06-20
### 新增
- 实现了添加仓库功能
  - 创建了`WarehouseAddModal.vue`组件，实现弹窗式添加仓库
  - 在`Warehouse.vue`中整合了添加仓库功能
  - 修改了权限检查，允许系统管理员和仓库管理员添加仓库
- 实现了添加物品功能
  - 改造了`ItemEditPage.vue`组件，使其同时支持添加和编辑物品功能
  - 添加了`/warehouse/:warehouseId/item/add`路由，用于添加物品
  - 在`WarehouseDetail.vue`中添加了"新增物品"按钮
  - 针对不同物品类别（仪器、配件、耗材、固定资产）提供了不同的表单字段
  - 实现了类别切换时动态调整详细信息表单的功能
  - 改进表单验证和提交逻辑，兼容添加和编辑两种模式

## 0.2.1 - 2025-06-22
### 更新
- 进一步优化了物品编辑页面`ItemEditPage.vue`
  - 添加了物品删除功能，包含删除密码确认对话框
  - 移除了必填项限制，允许字段为空
  - 扩展权限检查，允许系统管理员和仓库管理员编辑物品
  - 根据物品分类调整字段标签，提高用户体验
  - 配件库和耗材库中的"货号"字段标记为选填项
  - 为删除功能添加了样式和交互效果

## 0.2.0 - 2025-06-21
### 重构
- 重新设计了物品编辑页面`ItemEditPage.vue`
  - 直接使用API接口替代原来的store方法调用
  - 根据物品类别（仪器、配件、耗材、固定资产）动态显示不同表单字段
  - 添加了厂家/品牌、物品编号、数量、成本、到货日期、区域等数据库字段
  - 引入了卡片式布局，提高了UI结构清晰度
  - 优化了表单验证逻辑，针对不同类型的物品有不同的验证规则
  - 修复了表单字段与后端API要求不匹配的问题
  - 改进了只读字段的显示方式，禁用了不可编辑的字段

## 0.1.9 - 2025-06-20
### 新增
- 创建了物品编辑页面和对应功能
  - 创建了`ItemEditPage.vue`组件，用于编辑物品信息
  - 在路由配置中添加了`/warehouse/:warehouseId/item/:itemId/edit`路由，关联到`ItemEditPage.vue`组件
  - 修改了`ItemDetail.vue`中的编辑按钮点击事件，实现了导航到编辑页面的功能
  - 在仓库store中添加了`updateItemDetail`方法，用于更新物品信息
  - 解决了物品详情页中编辑按钮点击无反应的问题

## 0.1.8 - 2025-06-20
### 新增
- 创建了出入库记录页面和对应路由
  - 创建了`StockRecordPage.vue`组件，用于显示指定物品的出入库记录
  - 在路由配置中添加了`/warehouse/:warehouseId/item/:itemId/records`路由，关联到`StockRecordPage.vue`组件
  - 该页面提供了按记录类型筛选、时间范围筛选、分页等功能
  - 解决了物品详情页中"查看全部"按钮点击后报404错误的问题

## 0.1.7 - 2025-06-20
### 修复
- 修复了物品详情页面报错的问题
  - 将`ItemDetail.vue`中的`getCategoryName`方法中使用的不存在的`warehouseStore.getCategoryById`方法替换为正确的逻辑
  - 使用`warehouseStore.getCategoryValueById`获取类别值，再从`itemCategories`中查找对应的类别对象
  - 问题原因：物品详情页面调用了不存在的store方法，导致页面渲染时报错

## 0.1.6 - 2025-06-20
### 修复
- 修复了物品申请页面前端期望的字段与后端实际需要的字段不匹配的问题
  - 将`ItemRequestPage.vue`中显示物品库存的地方使用`quantity`字段而非错误的`stock`字段
  - 将申请数据中的`taskId`字段使用`selectedTask.value.id`而非`selectedTask.value.code`
  - 问题原因：前端期望的数据字段与后端API实际接收的数据字段不匹配，可能导致申请失败

## 0.1.5 - 2025-06-20
### 修复
- 修复了出库页面前端期望的字段与后端实际需要的字段不匹配的问题
  - 将`StockOutPage.vue`中构造的出库数据中的字段`outType`、`recipient`、`remark`替换为后端`StockOutRequest`实际需要的字段`operationTime`、`description`
  - 将显示物品库存的地方使用`quantity`字段而非错误的`stock`字段
  - 问题原因：前端期望的数据字段与后端API实际接收的数据字段不匹配，导致出库请求可能会失败

## 0.1.4 - 2025-06-20
### 修复
- 修复了二维码API调用路径不匹配的问题
  - 将`parseQRCode`函数的HTTP方法从`POST`修改为`GET`，并调整参数结构
  - 添加`generateQRCode`函数，用于生成物品二维码
  - 问题原因：前端API调用方法与后端API实现方法不匹配

## 0.1.3 - 2025-06-20
### 修复
- 修复了统计报表API调用路径不匹配的问题
  - 将`getInventoryStats`函数API调用路径从`${BASE_URL}/stats/inventory`修改为`${BASE_URL}/stats/category`
  - 将`getItemUsageStats`函数API调用路径从`${BASE_URL}/stats/usage`修改为`${BASE_URL}/request/usage-stats`
  - 问题原因：前端API调用路径与后端API实现路径不匹配

## 0.1.2 - 2025-06-20
### 修复
- 修复了盘库API调用路径不匹配的问题
  - 将`createInventoryCheck`函数API调用路径从`${BASE_URL}/inventory/check`修改为`${BASE_URL}/check/create`
  - 将`getInventoryCheckDetail`函数API调用路径从`${BASE_URL}/inventory/check`修改为`${BASE_URL}/check/detail`
  - 问题原因：前端API调用路径与后端API实现路径不匹配

## 0.1.1 - 2025-06-20
### 修复
- 修复了申请API调用路径不匹配的问题
  - 将`requestItemUse`函数API调用路径从`${BASE_URL}/request/use`修改为`${BASE_URL}/item/apply-use`
  - 将`requestItemPurchase`函数API调用路径从`${BASE_URL}/request/purchase`修改为`${BASE_URL}/item/apply-purchase`

### 版本 0.0.1 - 2024-07-05 15:30:00
- 项目初始化
- 创建基础目录结构

### 版本 0.0.2 - 2024-07-06 10:15:00
- 添加前端基础框架
- 创建后端基础结构

### 版本 0.0.3 - 2024-07-07 14:20:00
- 实现用户登录功能
- 添加权限控制模块

### 版本 0.0.4 - 2024-07-08 09:45:00
- 完成任务管理基础功能
- 添加任务列表和详情页面

### 版本 0.0.5 - 2024-07-09 16:30:00
- 实现消息模块基础功能
- 添加系统通知功能

### 版本 0.0.6 - 2024-07-10 11:20:00
- 完成仓库管理基础功能
- 添加物品入库和出库功能

### 版本 0.0.7 - 2024-07-11 14:00:00
- 将MySQL数据库初始化脚本转换为SQL Server 2019格式
- 转换了仓库模块、联系人和消息模块、任务模块、用户模块的数据库初始化脚本
- 调整了数据类型：DATETIME → DATETIME2, AUTO_INCREMENT → IDENTITY(1,1)
- 修改了默认值语法：DEFAULT CURRENT_TIMESTAMP → DEFAULT GETDATE()
- 添加了SQL Server特有的GO语句分隔批处理
- 使用了IF NOT EXISTS条件判断替代MySQL的同名语法
- 调整了注释格式和约束定义方式