# 项目开发日志

## 0.5.5 - 2025年06月25日

### 修复

- 修复了新建任务页面上传图片失败的问题（405 Method Not Allowed）
- 改进了图片上传逻辑，支持多图片上传和预览功能
- 修改了图片上传时机，从即时上传改为任务创建时批量上传
- 在后端TaskController中添加了不需要taskId的图片上传API
- 优化了TaskServiceImpl中的图片上传方法，支持批量上传和taskId为空的情况
- 改进了前端图片预览和管理功能，提供更好的用户体验

### 目的

- 解决新建任务页面图片上传失败的问题
- 提高用户体验，支持多图片上传和预览
- 优化图片上传流程，减少网络请求次数
- 确保前后端API路径一致，避免405错误

## 0.5.4 - 2025年06月25日

### 修复

- 修复了工程师列表和销售人员列表API的SQL查询问题，解决了"列名 'id' 不明确"的错误
- 在UserMapper.xml中添加了带表别名的列名列表，避免多表联接查询中的列名冲突
- 修复了CreateTask.vue中的setTimeout函数使用问题，将直接使用的setTimeout替换为window.setTimeout
- 确保客户、工程师和销售人员下拉菜单正常工作

### 目的

- 解决新建任务页面的500错误问题
- 确保前端可以正确获取工程师和销售人员列表数据
- 修复JavaScript运行时错误
- 提高系统稳定性和用户体验

## 0.5.3 - 2025年06月25日

### 修改

- 修改了前端API调用路径，使其与后端实现一致
- 将`/api/v1/customers`改为`/api/v1/customer/list`
- 将`/api/v1/engineers`改为`/api/v1/user/engineers`
- 将`/api/v1/users/sales`改为`/api/v1/user/sales`
- 在后端UserController中添加了获取工程师列表和销售人员列表的API
- 在UserService和UserMapper中添加了相应的方法
- 在UserMapper.xml中添加了查询工程师和销售人员的SQL语句

### 目的

- 修复新建任务页面的404错误问题
- 确保前端API调用路径与后端实现一致
- 完善用户管理模块功能，支持获取工程师和销售人员列表
- 提高系统稳定性和用户体验

## 0.5.2 - 2025年06月25日

### 添加

- 实现了仓库删除功能，包括删除按钮和确认模态框
- 添加了WarehouseDeleteModal组件，用于确认删除操作和输入删除密码
- 在warehouseStore中添加了deleteWarehouse方法，实现了仓库删除API调用
- 在仓库列表页面添加了删除仓库按钮，位于新增仓库按钮旁边

### 目的

- 完善仓库管理功能，提供删除仓库的能力
- 确保仓库删除操作安全可靠，需要密码确认
- 优化用户界面，使删除操作直观且易于访问
- 防止误操作，通过模态框确认和密码验证双重保护

## 0.5.1 - 2025年06月25日

### 修改

- 实现了物品详情页面的出库和入库按钮跳转功能
- 优化了入库页面和出库页面，支持从物品详情页直接跳转并自动选择物品
- 添加了URL参数自动选择物品的功能，提高用户体验
- 确保出入库数量不超过库存限制

### 目的

- 完善仓库物品管理功能，实现出入库操作流程
- 提高用户操作体验，减少重复选择步骤
- 修复出入库按钮未实现跳转的问题

## 0.5.0 - 2025年06月25日

### 修复

- 修复了SQL Server迁移后登录功能出现的500错误问题
- 解决了application.yml和JwtUtil.java文件中的中文编码问题
- 增强了UserServiceImpl中的登录方法，添加更详细的日志和错误处理
- 重构了前端http.js文件，改进了错误处理机制，特别是对500错误的处理
- 修复了前端API请求时可能出现的编码问题

### 目的

- 解决登录功能在SQL Server环境下的兼容性问题
- 提高系统稳定性和错误处理能力
- 改进日志记录，便于问题排查
- 优化前后端交互，提升用户体验

## 0.4.9 - 2025年06月24日

### 修复

- 修复了由于SQL Server迁移导致的getter/setter编译错误
- 给所有DTO和实体类添加了@NoArgsConstructor和@AllArgsConstructor注解
- 更新了以下类的Lombok注解：
  - WarehouseItemDetailDTO
  - StockRecordDTO
  - ResponseDTO
  - PageDTO
  - VehicleInfoResponse
  - VehicleInfoRequest
  - WarehouseItem
  - StockRecord
  - VehicleInfo
  - TaskDTO
  - UserInfoResponse
  - UserInfoRequest
  - LoginRequest
  - LoginResponse
  - EngineerDTO
  - TaskStepDTO及其内部类OperatorDTO
  - TaskFlowDTO及其内部类TimelineItem和FlowRecordDTO

### 目的

- 解决SQL Server迁移后的编译错误
- 确保所有DTO和实体类的Lombok注解完整，正确生成getter/setter方法
- 提高代码稳定性和可维护性
- 为后续功能开发提供稳定的基础

## 0.4.8 - 2025年06月24日

### 修改

- 修改了所有Mapper XML文件，添加了dbo.前缀到表名
- 确保所有SQL查询语句正确引用SQL Server表名
- 统一了所有Mapper XML文件的表名引用格式
- 完成了从MySQL到SQL Server的数据库适配工作

### 目的

- 解决SQL Server数据库连接和查询问题
- 确保后端应用能正确从SQL Server数据库获取数据
- 统一表名引用格式，提高代码可维护性
- 为后续功能开发提供稳定可靠的数据库访问环境

## 0.4.7 - 2025年06月24日

### 修改

- 修改了所有Mapper XML文件，添加了dbo.前缀到表名
- 确保所有SQL查询语句正确引用SQL Server表名
- 统一了所有Mapper XML文件的表名引用格式
- 完成了从MySQL到SQL Server的数据库适配工作

### 目的

- 解决SQL Server数据库连接和查询问题
- 确保后端应用能正确从SQL Server数据库获取数据
- 统一表名引用格式，提高代码可维护性
- 为后续功能开发提供稳定可靠的数据库访问环境

## 0.4.6 - 2024年06月25日

### 修复

- 修复了SQL Server数据库表名映射问题，添加了dbo.前缀
- 修改了MyBatis配置，确保正确连接到SQL Server数据库
- 创建了测试工具类，用于验证数据库连接和查询功能
- 添加了数据库连接测试控制器，提供API接口测试数据库连接
- 更新了Mapper XML文件，确保SQL查询使用正确的表名格式

### 目的

- 解决SQL Server数据库连接和查询问题
- 确保后端应用能正确从SQL Server数据库获取数据
- 提供测试工具和API接口，方便验证数据库连接状态
- 为后续开发提供稳定可靠的数据库访问环境

## 0.4.5 - 2024年06月24日

### 添加

- 创建了多种数据库连接测试工具，验证SQL Server数据库连接和查询功能
- 实现了SqlServerConnectionTest类，使用纯JDBC方式测试数据库连接
- 实现了SpringDataSourceTest类，使用Spring Boot配置测试数据源连接
- 创建了UserMapperTest测试类，验证MyBatis映射器与SQL Server的交互
- 实现了RunDatabaseTests主类，统一运行所有数据库测试

### 目的

- 确保后端应用能正确连接到SQL Server数据库
- 验证MyBatis与SQL Server的集成效果
- 排查数据库连接和查询问题
- 为后续开发提供稳定可靠的数据库环境保障

## 0.4.4 - 2024年06月23日

### 添加

- 创建SQL Server数据库连接测试类SqlServerConnectionTest
- 添加了JdbcTemplate测试控制器，验证数据库连接和基本查询功能
- 修改了application.yml中的数据库配置，支持SQL Server身份验证
- 添加了mybatis-config.xml配置文件，支持SQL Server特定配置
- 更新了任务和用户Mapper XML文件，添加dbo.前缀到表名

### 目的

- 完成数据库迁移工作，确保应用程序可以正常连接SQL Server
- 提供数据库连接状态检测API，便于监控和排查问题
- 确保所有业务功能在SQL Server环境下正常运行
- 为后续功能开发提供稳定的数据库环境

## 0.4.3 - 2024年07月08日

### 修复

- 添加了缺失的CustomerServiceImpl实现类
- 在CustomerServiceImpl中实现了getCustomerDevices方法
- 在CustomerService接口中添加了getCustomerDevices方法声明
- 在CustomerMapper接口中添加了selectCustomerDevices方法声明
- 确保了/api/v1/customer/{customerId}/devices接口正常工作

### 目的

- 修复客户设备API接口功能缺失问题
- 确保前端可以正常获取客户设备数据
- 完善客户管理模块功能

## 0.4.2 - 2025年06月30日

### 修改

- 修改了数据库连接配置，从MySQL迁移到SQL Server
- 更新了application.yml中的数据库URL和驱动配置
- 添加了SQL Server JDBC驱动依赖
- 修改了部分SQL查询语句，使其与SQL Server语法兼容
- 更新了分页插件配置，使用SQL Server方言

### 目的

- 完成数据库迁移，从MySQL切换到SQL Server
- 确保应用程序能与SQL Server正常交互
- 保持应用功能完整性，确保所有功能在新数据库环境中正常工作

## 0.4.1 - 2025年06月29日

### 修复

- 修复了SQL Server版本中缺少customer表导致的外键约束错误
- 创建了SQL Server版本的customer表定义脚本，与MySQL版本保持一致
- 创建了组合脚本combined_tables_sqlserver.sql和combined_tables_mysql.sql，确保表创建顺序正确
- 更新了初始化数据的脚本，确保脚本能在SQL Server环境下正确执行
- 添加了数据库文档，描述了每个表的结构和关系

### 目的

- 修复数据库初始化脚本的错误
- 确保数据库初始化过程顺利完成
- 提供完整的数据库初始化脚本，包括表结构和测试数据

## 0.4.0 - 2025年06月28日

### 添加

- 实现了客户设备API端点(/api/v1/customer/{customerId}/devices)
- 添加了CustomerDeviceController控制器
- 创建了CustomerDeviceDTO数据传输对象
- 添加了CustomerDeviceService服务接口及其实现
- 更新了数据库脚本，添加了customer_device表

### 目的

- 提供客户设备管理功能
- 支持前端客户设备列表显示
- 修复客户设备API与数据库表结构不一致的问题

## 0.3.9 - 2025年06月27日

### 修复

- 修复了TaskDetail.vue中的showTransferDialog变量未定义问题，解决了"Property 'showTransferDialog' was accessed during render but is not defined on instance"错误
- 实现了客户设备API端点(/api/v1/customer/{customerId}/devices)，包括Controller、Service、Mapper和XML配置
- 确保TaskTransferDialog组件能正确显示和隐藏
- 修复了任务转出功能中的数据更新问题
- 优化了任务转出后的状态更新逻辑

### 目的

- 修复任务详情页面中的显示错误
- 实现任务转出功能
- 确保任务转出功能正常工作

## 0.3.8 - 2025年06月26日

### 修复

- 修复了Home.vue中的路由导航问题，解决了"Navigation guard abort"错误
- 修复了TaskDetail.vue中的数据加载问题，解决了任务详情无法显示的问题
- 更新了router.js，添加了任务详情页面的路由配置
- 修复了TaskCard组件中的点击事件，确保能正确跳转到任务详情页面
- 优化了任务列表页面的加载性能

### 目的

- 修复首页到任务详情页面的导航问题
- 确保从Home页面可以正常跳转到任务详情页面

## 0.3.7 - 2025年06月25日

### 添加

- 实现了任务详情页面的步骤展示功能
- 添加了TaskStep组件，用于显示任务的步骤信息
- 创建了StepTimeline组件，展示任务步骤的时间线
- 实现了TaskDetailHeader组件，显示任务的基本信息
- 添加了TaskActions组件，提供任务的操作按钮

### 目的

- 完善任务详情页面的功能
- 提供更直观的任务步骤展示
- 优化任务详情页面的用户交互体验

## 0.3.6 - 2025年06月25日

### 修复

- 修复了API请求中的URL错误，将错误的URL路径/api/task/更正为/api/v1/task/
- 更新了TaskService.js中的API调用方法，确保使用正确的URL
- 修复了任务列表页面的分页问题，解决了分页参数错误导致的数据加载失败
- 优化了API错误处理，添加了更详细的错误日志
- 更新了API文档，确保文档与实际API保持一致

### 目的

- 修复API请求错误
- 确保前端能正确访问后端API
- 优化应用性能，避免对不存在API的调用

## 0.3.5 - 2025年06月23日

### 修复

- 修复StagewiseToolbarLoader组件中VuePlugin使用方式错误
- 将`new VuePlugin()`修改为直接使用`VuePlugin`，解决"VuePlugin is not a constructor"错误
- 更新了Vue插件的加载方式，遵循Vue 3的插件使用规范
- 修复了工具栏组件的样式问题，确保与设计稿一致
- 优化了工具栏的加载性能

### 目的

- 修复Vue插件使用错误
- 确保stagewise工具栏正确加载和显示

## 0.3.4 - 2025年06月23日

### 修复

- 修复了TaskCard.vue中的日期格式化问题，解决了日期显示为"Invalid Date"的错误
- 添加了dayjs库用于日期格式化，替换不兼容的Date.toLocaleDateString()方法
- 更新了所有涉及日期显示的组件，统一使用dayjs进行格式化
- 修复了TaskList.vue中的数据绑定问题，确保任务列表能正确显示
- 添加了日期格式化的工具函数，提高代码复用性

### 目的

- 修复日期显示错误
- 统一日期格式化方法
- 提高代码的健壮性和可维护性

## 0.3.3 - 2025年06月23日

### 添加

- 创建了.vscode/settings.json文件，配置编辑器设置
- 添加了格式化规则，统一代码风格
- 配置了ESLint规则，增强代码质量检查
- 添加了文件关联配置，提高编辑器对项目文件的识别能力
- 设置了推荐的扩展插件列表，方便团队成员安装必要的工具

### 目的

- 统一开发环境配置
- 提高代码质量和一致性
- 提高开发效率和协作能力

## 0.3.2 - 2025年06月23日

### 添加

- 创建了TaskService.js文件，实现任务相关的API调用
- 添加了UserService.js文件，实现用户相关的API调用
- 实现了ApiClient.js文件，封装Axios请求，统一处理API请求和响应
- 添加了AuthService.js文件，处理用户认证相关的逻辑
- 创建了StorageService.js文件，管理本地存储数据

### 目的

- 抽象和封装API调用逻辑
- 提高代码复用性
- 简化组件中的数据获取逻辑
- 统一错误处理机制 