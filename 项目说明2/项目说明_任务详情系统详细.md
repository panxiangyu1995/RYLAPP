## 任务详情页面详细实现说明

### 任务类型定义
系统支持8种不同类型的任务：
1. 仪器维修
2. 仪器保养
3. 仪器回收
4. 仪器租赁
5. 培训预约
6. 仪器验证
7. 仪器选型
8. 仪器安装

### 详情页面组件结构
任务详情页面包含以下核心组件：

1. **任务状态显示区**
   - 显示状态：待处理、进行中、等待配件、客户确认中、已完成、已取消
   - 权限控制：仅系统管理员和工程师可修改，其他角色只读
   - 修改记录：记录谁进行了修改

2. **任务简介区**
   - 任务名称、类型、客户描述内容、任务ID、创建时间、预计完成时间
   - 所有角色均不可编辑，仅供显示

3. **客户信息区**
   - 简介：客户姓名、公司名、部门、职位、联系电话、联系地址、联系邮箱
   - 点击详情可显示所有用户信息及客户所有任务中的设备信息
   - 设备备注编辑权限：工程师、系统管理员、销售可编辑，记录编辑人

4. **对应销售区**
   - 显示服务该客户的销售名字

5. **设备信息区**
   - 显示任务涉及的仪器信息（可能有多台设备）
   - 包含客户通过小程序上传的文字信息、图片（支持预览和下载）、附件（支持预览和下载）

6. **任务流程区**
   - 根据任务类型显示不同的流程步骤
   - 编辑权限：仅工程师和系统管理员可编辑（包括提交图片、文字和附件）
   - 流程状态显示：已完成（右侧显示"已完成"）、进行中（显示"进行中"）、待完成（显示"待完成"）

7. **协助工程师区**
   - 任务所有者排第一且不可删除
   - 右上角可邀请协助
   - 显示协助者头像和名字，可点击头像右上角的X删除协助者
   - 协助者拥有与所有者相同的任务编辑权限

8. **转出任务功能**
   - 位于页面最下方
   - 仅系统管理员和任务所有者工程师可转出任务
   - 可转给一个或多个工程师

### 特殊交互逻辑
1. **导航控制**
   - 页面底部固定有"上一步"和"下一步"按钮
   - 点击后更新数据库中的任务进度
   - 任何操作都有确认弹窗

2. **上门服务判断**
   - "判断是否需要上门"步骤有两个选项：需要上门/不需要上门
   - 选择不需要上门：直接跳转到"等待用户评价"步骤
   - 选择需要上门：正常进入下一步

3. **步骤编辑功能**
   - 每个步骤下方都有编辑记录按钮（除已结单、用户评价和已完成步骤）
   - 点击后可进行图文编辑和附件上传
   - 可对任何步骤进行补充说明、图片和附件上传

### 与其他页面的关系
TaskFlowDetail.vue不在任务中显示，仅作为任务详情的查看页，无编辑功能，对应联系人页面中工程师详情下的"查看完整流程"跳转页面。